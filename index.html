CORBA

(Hello.idl)
module HelloApp {
    interface Hello {
       string sayHello();
       void shutdown();
    };
};

++++++++++++++++++++++++++++++++++++++++++++++++++++++

(HelloClient.java)
import HelloApp.*;
import org.omg.CORBA.*;
import org.omg.CosNaming.*;
import org.omg.CosNaming.NamingContextPackage.*;

public class HelloClient {
    public static void main(String args[]) {
        try {
            // Initialize the ORB
            ORB orb = ORB.init(args, null);

            // Get the Naming Service reference
            org.omg.CORBA.Object objRef = orb.resolve_initial_references("NameService");
            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);

            // Resolve the object reference
            String name = "Hello";
            NameComponent path[] = ncRef.to_name(name);
            Hello helloRef = HelloHelper.narrow(ncRef.resolve(path));

            // Invoke the remote method
            System.out.println(helloRef.sayHello());
            helloRef.shutdown();
        } catch (Exception e) {
            System.out.println("ERROR : " + e);
            e.printStackTrace(System.out);
        }
    }
}

++++++++++++++++++++++++++++++++++++++++++++++++++++++

(HelloImpl.java)
import HelloApp.*;
import org.omg.CORBA.*;
import org.omg.PortableServer.*;

public class HelloImpl extends HelloPOA {
    private ORB orb;

    public void setORB(ORB orb_val) {
        orb = orb_val;
    }

    public String sayHello() {
        return "Hello, CORBA world!";
    }

    public void shutdown() {
        orb.shutdown(false);  // Shutdown the ORB
    }
}

++++++++++++++++++++++++++++++++++++++++++++++++++++++

(HelloServer.java)
import HelloApp.*;
import org.omg.CORBA.*;
import org.omg.PortableServer.*;
import org.omg.CosNaming.*;
import org.omg.CosNaming.NamingContextPackage.*;

public class HelloServer {
    public static void main(String args[]) {
        try {
            // Initialize the ORB
            ORB orb = ORB.init(args, null);

            // Get reference to Root POA and activate the POAManager
            POA rootpoa = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
            rootpoa.the_POAManager().activate();

            // Create servant and register it with the ORB
            HelloImpl helloImpl = new HelloImpl();
            helloImpl.setORB(orb);

            // Get the object reference from the servant
            org.omg.CORBA.Object ref = rootpoa.servant_to_reference(helloImpl);
            Hello href = HelloHelper.narrow(ref);

            // Get the Naming Service reference
            org.omg.CORBA.Object objRef = orb.resolve_initial_references("NameService");
            NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);

            // Bind the object reference in naming
            String name = "Hello";
            NameComponent path[] = ncRef.to_name(name);
            ncRef.rebind(path, href);

            System.out.println("HelloServer ready and waiting...");

            // Wait for client requests
            orb.run();
        } catch (Exception e) {
            System.out.println("ERROR : " + e);
            e.printStackTrace(System.out);
        }
        System.out.println("HelloServer Exiting...");
    }
}

1.Compile Hello.idl using idlj
idlj -fall Hello.idl
2.Compile all the java files present inside Module HelloApp , client and server files
javac HelloApp/*.java helloServer.java helloClient.java
3.Start the ORB
tnameserv -ORBIntialPort 1050
3.Start the server
java HelloServer -ORBInitialPort 1050 -ORBInitialHost localhost
4.Start the Client
java HelloServer -ORBInitialPort 1050 -ORBInitialHost localhost
5.Server Output
java HelloServer -ORBInitialPort 1050 -ORBInitialHost localhost

-------------------------------------------------------------------------------------------------------------------------

Shared Memory
(SharedMemoryServer.java)

import java.io.*;
import java.net.*;

public class SharedMemoryServer {
    private static int sharedVariable = 50; // Initial value of shared variable

    public static void main(String[] args) {
        try (ServerSocket serverSocket = new ServerSocket(5000)) {
            System.out.println("SharedMemoryServer started on port 5000...");

            while (true) {
                Socket clientSocket = serverSocket.accept();
                new ClientHandler(clientSocket).start();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private static class ClientHandler extends Thread {
        private final Socket socket;

        public ClientHandler(Socket socket) {
            this.socket = socket;
        }

        @Override
        public void run() {
            try (BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                 PrintWriter out = new PrintWriter(socket.getOutputStream(), true)) {

                out.println("Connected to SharedMemoryServer. Type 'exit' to quit.");
                String command;

                while ((command = in.readLine()) != null) {
                    if (command.equalsIgnoreCase("get")) {
                        out.println("Accessed Shared Variable: " + sharedVariable);
                    } else if (command.equalsIgnoreCase("set")) {
                        out.println("Enter Value:");
                        try {
                            int newValue = Integer.parseInt(in.readLine());
                            sharedVariable = newValue;
                            out.println("Updated Shared Variable: " + sharedVariable);
                        } catch (NumberFormatException e) {
                            out.println("Invalid Value. Please enter an integer.");
                        }
                    } else if (command.equalsIgnoreCase("exit")) {
                        out.println("Disconnecting...");
                        break;
                    } else {
                        out.println("Invalid Command");
                    }
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}

++++++++++++++++++++++++++++++++++++++++++++++++++++++

(SharedMemoryClient.java)

import java.io.*;
import java.net.*;

public class SharedMemoryClient {
    public static void main(String[] args) {
        try (Socket socket = new Socket("localhost", 5000);
             BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
             PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
             BufferedReader userInput = new BufferedReader(new InputStreamReader(System.in))) {

            System.out.println(in.readLine()); // Welcome message

            String command;
            while (true) {
                System.out.print("Enter Command (get/set/exit): ");
                command = userInput.readLine();
                out.println(command);

                if (command.equalsIgnoreCase("set")) {
                    System.out.print("Enter Value: ");
                    out.println(userInput.readLine());
                }

                String response = in.readLine();
                System.out.println(response);

                if (command.equalsIgnoreCase("exit")) {
                    break;
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
STEPS:
1)Start the server
java SharedMemoryServer

2)Start 2 client using terminal
java SharedMemoryClient

3)Obtain value using client 1
java SharedMemoryClient (get)

4)Set value using client 1 itself
java SharedMemoryClient (set)

5)Check the value using client 2
java SharedMemoryClient (get)
